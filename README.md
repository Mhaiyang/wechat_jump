## 前言
本文主要分享如何用Opencv对游戏截图进行检测，自动找到小人和跳跃目标点的位置，计算跳跃距离，从而让电脑帮你玩跳一跳游戏！

## 主要使用的Python库及对应版本：
python 3.6  
opencv-python 3.3.0  
numpy 1.13.3  

## Opencv  
首先介绍下opencv，是一个计算机视觉库，本文将用到opencv里的模板匹配和边缘检测功能。  

### 模板匹配
模板匹配是在一幅图像中寻找一个特定目标的方法之一。这种方法的原理非常简单，遍历图像中的每一个可能的位置，比较各处与模板是否“相似”，当相似度足够高时，就认为找到了我们的目标。  
例如提供小人的模板图片

使用OpenCV的matchTemplate函数，就能找到中小人的位置。小人的检测效果非常好，每次都能识别得很精确。

观察到小人跳到物块中心之后，下一个物块中心就会出现白色小圆点，同样可以匹配图中白色小圆点，从而获得跳跃目标点的坐标，计算跳跃的距离。

但是只匹配小圆点获得跳跃目标位置会出现问题，因为有些物块本身就是白色的，导致检测失败，所以我们在检测失败（模板匹配的相似度很低）的情况下采用边缘检测。

### 边缘检测
边缘检测顾名思义就是检测图片中的边缘，使用opencv中的cv2.Canny函数。
跳一跳的画面很简洁，所以边缘检测的效果很好。检测出边缘后，从上至下扫描图片就能找到下一个物块的大致位置。

# 总结
以上就是用OpenCV让电脑帮你玩跳一跳的整体思路，还有很多细节之后再补充.  
电脑上安装好adb驱动和相关的Python库，手机通过数据线连接电脑，运行play.py，接下来你就可以刷刷剧吃吃零食，然后让电脑帮你刷分啦～  
这是我自己的结果截图，自动刷到1000分以上是没有问题的。  
还有很多不完善的地方，例如屏幕分辨率适配等，如果有什么更好的想法和建议，欢迎评论共同探讨～～
